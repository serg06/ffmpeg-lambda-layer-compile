Compiling FFmpeg on Amazon Linux 2023 requires installing development tools and libraries, then configuring and building the FFmpeg source.
1. Install Dependencies:
First, install the necessary build tools and libraries using dnf (which replaces yum in Amazon Linux 2023):
Code

sudo dnf install -y autoconf automake bzip2 bzip2-devel cmake freetype-devel gcc gcc-c++ git libtool make pkgconfig zlib-devel nasm yasm
2. Prepare Source Directory:
Create a directory to store the FFmpeg source and navigate into it:
Code

mkdir ~/ffmpeg_sources
cd ~/ffmpeg_sources
3. Download and Extract FFmpeg Source:
Download the latest stable FFmpeg release and extract it:
Code

curl -O -L https://ffmpeg.org/releases/ffmpeg-snapshot.tar.bz2
tar xjvf ffmpeg-snapshot.tar.bz2
cd ffmpeg
4. Configure FFmpeg:
Configure FFmpeg with desired options, specifying the installation prefix and other build flags. This example sets /opt/ffmpeg as the installation directory and includes common security flags:
Code

./configure \
  --prefix="/opt/ffmpeg" \
  --bindir="/opt/ffmpeg/bin" \
  --extra-cflags="-I/opt/ffmpeg/include -fstack-protector-strong -fpie -pie -Wl,-z,relro,-z,now -D_FORTIFY_SOURCE=2" \
  --enable-shared \
  --enable-gpl \
  --enable-nonfree # Include this if you need non-free codecs like H.264
5. Compile and Install:
Compile FFmpeg and install it to the specified prefix:
Code

make
sudo make install
6. Update Environment Variables:
Add the FFmpeg binary directory to your system's PATH for easy access:
Code

echo 'export PATH="$PATH:/opt/ffmpeg/bin"' | sudo tee -a /etc/profile.d/ffmpeg.sh
source /etc/profile.d/ffmpeg.sh
7. Verify Installation:
Verify the installation by checking the FFmpeg version:
Code

ffmpeg -version
